<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Valentine Card</title>
  <style>
    :root{
      --bg: #ffd6e6;
      --panel: rgba(255,255,255,0.72);
      --panel-stroke: rgba(255,255,255,0.85);
      --ink: #3a2b33;
      --muted: rgba(58,43,51,0.62);

      --pink-1:#ff7fb0;
      --pink-2:#ff5a98;

      --bear: #f7d7c2;
      --bear-shadow: #f0c7ae;
      --bear-inner: #ffe9dd;

      --diaper: #ffffff;
      --diaper-stroke: rgba(255,255,255,0.9);
      --diaper-accent: #bfe6ff;

      --btn-yes: #ff6ea7;
      --btn-yes-2: #ff8bb9;
      --btn-no: rgba(255,255,255,0.55);

      --shadow: 0 18px 50px rgba(58,43,51,0.14);
      --shadow-soft: 0 12px 30px rgba(58,43,51,0.12);
      --radius: 22px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background: radial-gradient(1200px 900px at 50% 0%, #ffe5f0 0%, var(--bg) 55%, #ffd0e1 100%);
      color: var(--ink);
      font-family: ui-rounded, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
      overflow:hidden;
    }

    /* Always-on gentle sparkles */
    .sparkle-layer{
      position:fixed;
      inset:0;
      pointer-events:none;
      overflow:hidden;
      z-index:0;
    }
    .sparkle{
      position:absolute;
      width:8px;height:8px;
      border-radius:999px;
      background: rgba(255,255,255,0.65);
      filter: blur(0.2px);
      box-shadow:
        0 0 0 3px rgba(255,255,255,0.10),
        0 0 18px rgba(255,255,255,0.55);
      opacity:0.0;
      transform: translate3d(0,0,0);
      animation: sparkleFloat 7.5s linear infinite, sparkleBlink 2.8s ease-in-out infinite;
    }
    .sparkle::after{
      content:"";
      position:absolute;
      inset:-4px;
      border-radius:999px;
      background: radial-gradient(circle, rgba(255,255,255,0.45), rgba(255,255,255,0.0) 60%);
    }
    @keyframes sparkleFloat{
      from{ transform: translate3d(0, 18px, 0); }
      to{ transform: translate3d(0, -120px, 0); }
    }
    @keyframes sparkleBlink{
      0%,100%{ opacity:0.12; }
      50%{ opacity:0.62; }
    }

    .wrap{
      position:relative;
      height:100%;
      display:grid;
      place-items:center;
      padding: 18px 14px 28px;
      z-index:1;
    }

    .card{
      width:min(420px, 92vw);
      background: var(--panel);
      border: 1px solid rgba(255,255,255,0.85);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      overflow:hidden;
      position:relative;
    }

    .card-inner{
      padding: 18px 18px 16px;
      display:flex;
      flex-direction:column;
      gap: 14px;
      align-items:center;
    }

    .title{
      width:100%;
      text-align:center;
      font-size: clamp(18px, 4.6vw, 22px);
      line-height: 1.25;
      letter-spacing: 0.2px;
      color: var(--ink);
      padding: 12px 12px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,0.9);
      background: rgba(255,255,255,0.55);
      box-shadow: 0 10px 22px rgba(58,43,51,0.08);
    }
    .subtitle{
      margin-top: -6px;
      font-size: 12.5px;
      color: var(--muted);
    }

    /* Plush bear illustration (CSS) */
    .bear-stage{
      width:100%;
      display:grid;
      place-items:center;
      padding: 6px 0 2px;
    }

    .bear{
      position:relative;
      width: 230px;
      height: 250px;
      transform: translateY(2px);
    }

    /* soft base shadow */
    .bear .floor{
      position:absolute;
      left:50%;
      bottom: 10px;
      transform: translateX(-50%);
      width: 200px;
      height: 34px;
      border-radius: 999px;
      background: rgba(58,43,51,0.10);
      filter: blur(9px);
      opacity: 0.55;
    }

    .bear .torso{
      position:absolute;
      left:50%;
      bottom: 34px;
      transform: translateX(-50%);
      width: 200px;
      height: 150px;
      border-radius: 90px 90px 70px 70px / 80px 80px 70px 70px;
      background: linear-gradient(180deg, var(--bear) 0%, #f5d2bd 55%, #efc6ae 100%);
      box-shadow: 0 14px 26px rgba(58,43,51,0.12);
    }
    .bear .torso::before{
      content:"";
      position:absolute;
      left:50%;
      top: 18px;
      transform: translateX(-50%);
      width: 140px;
      height: 108px;
      border-radius: 70px;
      background: radial-gradient(90px 70px at 50% 35%, var(--bear-inner) 0%, rgba(255,233,221,0.85) 55%, rgba(255,233,221,0.0) 100%);
      opacity: 0.8;
    }

    .bear .head{
      position:absolute;
      left:50%;
      top: 20px;
      transform: translateX(-50%);
      width: 164px;
      height: 142px;
      border-radius: 78px 78px 64px 64px;
      background: linear-gradient(180deg, #f9decf 0%, var(--bear) 55%, #f0c7ae 100%);
      box-shadow: 0 16px 30px rgba(58,43,51,0.10);
      z-index:3;
    }

    .bear .ear{
      position:absolute;
      top: 8px;
      width: 54px;
      height: 54px;
      border-radius: 999px;
      background: linear-gradient(180deg, #f9decf 0%, var(--bear) 60%, #efc4ad 100%);
      box-shadow: 0 10px 16px rgba(58,43,51,0.10);
      z-index:2;
    }
    .bear .ear.left{ left: 18px; transform: rotate(-8deg); }
    .bear .ear.right{ right: 18px; transform: rotate(8deg); }
    .bear .ear::after{
      content:"";
      position:absolute;
      inset: 13px;
      border-radius: 999px;
      background: rgba(255,233,221,0.85);
    }

    /* No neck: head grows out of torso */
    .bear .head-join{
      position:absolute;
      left:50%;
      top: 128px;
      transform: translateX(-50%);
      width: 140px;
      height: 44px;
      border-radius: 30px;
      background: linear-gradient(180deg, rgba(249,222,207,0.0) 0%, rgba(247,215,194,0.95) 60%, rgba(240,199,174,1) 100%);
      filter: blur(0.1px);
      z-index:2;
    }

    .bear .face{
      position:absolute;
      left:50%;
      top: 52px;
      transform: translateX(-50%);
      width: 130px;
      height: 86px;
      z-index:4;
    }
    .eye{
      position:absolute;
      top: 34px; /* slightly lower than center */
      width: 10px;
      height: 12px;
      border-radius: 999px;
      background: rgba(58,43,51,0.88);
      box-shadow: 0 2px 0 rgba(255,255,255,0.22) inset;
    }
    .eye.left{ left: 28px; }
    .eye.right{ right: 28px; }

    .nose{
      position:absolute;
      left:50%;
      top: 46px;
      transform: translateX(-50%);
      width: 14px;
      height: 10px;
      border-radius: 7px;
      background: rgba(58,43,51,0.70);
    }
    .mouth{
      position:absolute;
      left:50%;
      top: 58px;
      transform: translateX(-50%);
      width: 20px;
      height: 10px;
      border-bottom: 2px solid rgba(58,43,51,0.40);
      border-radius: 0 0 14px 14px;
      opacity: 0.75; /* almost neutral */
    }

    .blush{
      position:absolute;
      top: 52px;
      width: 26px;
      height: 14px;
      border-radius: 999px;
      background: radial-gradient(circle, rgba(255,130,175,0.45) 0%, rgba(255,130,175,0.0) 70%);
      filter: blur(0.2px);
      opacity: 0.9;
    }
    .blush.left{ left: 6px; }
    .blush.right{ right: 6px; }

    /* Quiet limbs */
    .arm{
      position:absolute;
      top: 130px;
      width: 52px;
      height: 54px;
      border-radius: 28px;
      background: linear-gradient(180deg, var(--bear) 0%, var(--bear-shadow) 100%);
      opacity: 0.85;
      z-index:1;
    }
    .arm.left{ left: 6px; transform: rotate(10deg); }
    .arm.right{ right: 6px; transform: rotate(-10deg); }

    .leg{
      position:absolute;
      bottom: 22px;
      width: 66px;
      height: 44px;
      border-radius: 28px;
      background: linear-gradient(180deg, #f5d2bd 0%, #efc6ae 100%);
      opacity: 0.90;
      z-index:1;
    }
    .leg.left{ left: 52px; }
    .leg.right{ right: 52px; }

    /* Heavy grounded feet */
    .foot{
      position:absolute;
      bottom: 8px;
      width: 86px;
      height: 46px;
      border-radius: 30px 30px 26px 26px;
      background: linear-gradient(180deg, #f5d2bd 0%, #efc6ae 100%);
      box-shadow: 0 12px 18px rgba(58,43,51,0.10);
      z-index:2;
    }
    .foot.left{ left: 34px; }
    .foot.right{ right: 34px; }
    .foot::after{
      content:"";
      position:absolute;
      left:50%;
      top: 14px;
      transform: translateX(-50%);
      width: 56px;
      height: 22px;
      border-radius: 18px;
      background: rgba(255,233,221,0.55);
      opacity: 0.9;
    }

    /* Diaper */
    .diaper{
      position:absolute;
      left:50%;
      bottom: 44px;
      transform: translateX(-50%);
      width: 160px;
      height: 92px;
      border-radius: 28px;
      background: linear-gradient(180deg, rgba(255,255,255,0.98) 0%, rgba(255,255,255,0.88) 65%, rgba(240,248,255,0.92) 100%);
      border: 1px solid rgba(255,255,255,0.9);
      box-shadow: 0 10px 18px rgba(58,43,51,0.08);
      z-index:4;
    }
    .diaper::before{
      content:"";
      position:absolute;
      left: 14px;
      right: 14px;
      top: 18px;
      height: 44px;
      border-radius: 18px;
      background: linear-gradient(90deg, rgba(191,230,255,0.0) 0%, rgba(191,230,255,0.65) 50%, rgba(191,230,255,0.0) 100%);
      opacity: 0.85;
    }
    .tape{
      position:absolute;
      top: 18px;
      width: 30px;
      height: 18px;
      border-radius: 8px;
      background: rgba(191,230,255,0.75);
      box-shadow: 0 6px 10px rgba(58,43,51,0.06);
      opacity: 0.9;
    }
    .tape.left{ left: 10px; transform: rotate(-6deg); }
    .tape.right{ right: 10px; transform: rotate(6deg); }

    .buttons{
      width:100%;
      display:flex;
      gap: 12px;
      justify-content:center;
      padding: 10px 0 6px;
      position:relative;
    }

    button{
      border:0;
      border-radius: 16px;
      padding: 12px 16px;
      font-weight: 700;
      letter-spacing: 0.2px;
      font-size: 16px;
      min-width: 118px;
      box-shadow: var(--shadow-soft);
      cursor:pointer;
      transform: translateZ(0);
      transition: transform 180ms ease, filter 180ms ease;
      -webkit-tap-highlight-color: transparent;
      touch-action: manipulation;
      user-select:none;
    }
    button:active{ transform: translateY(1px) scale(0.99); }

    .yes{
      color: white;
      background: linear-gradient(180deg, var(--btn-yes-2) 0%, var(--btn-yes) 70%);
    }
    .yes:focus-visible{
      outline: 3px solid rgba(255,110,167,0.35);
      outline-offset: 3px;
    }

    .no-wrap{
      position:relative;
      width: 128px;
      height: 46px;
    }
    .no{
      position:absolute;
      inset:0;
      color: var(--ink);
      background: var(--btn-no);
      border: 1px solid rgba(255,255,255,0.85);
      backdrop-filter: blur(8px);
      -webkit-backdrop-filter: blur(8px);
    }
    .no:focus-visible{
      outline: 3px solid rgba(58,43,51,0.15);
      outline-offset: 3px;
    }

    .hint{
      font-size: 12px;
      color: var(--muted);
      margin: -2px 0 10px;
      text-align:center;
    }

    /* Celebration overlay */
    .overlay{
      position:fixed;
      inset:0;
      display:none;
      place-items:center;
      background: rgba(255,214,230,0.72);
      backdrop-filter: blur(10px);
      -webkit-backdrop-filter: blur(10px);
      z-index: 50;
      overflow:hidden;
    }
    .overlay.show{ display:grid; }

    .overlay-inner{
      width:min(520px, 92vw);
      height: min(560px, 82vh);
      border-radius: 26px;
      background: rgba(255,255,255,0.55);
      border: 1px solid rgba(255,255,255,0.85);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
      display:grid;
      place-items:center;
      padding: 18px;
    }

    .hero{
      width: min(440px, 86vw);
      aspect-ratio: 1 / 1;
      position:relative;
      display:grid;
      place-items:center;
    }

    .float-hearts{
      position:absolute;
      inset:0;
      pointer-events:none;
      z-index:3;
    }
    .mini-heart{
      position:absolute;
      width: 18px;
      height: 18px;
      opacity: 0.0;
      transform: translate3d(0,0,0);
      animation: miniRise 5.2s linear infinite, miniBlink 2.6s ease-in-out infinite;
      filter: drop-shadow(0 10px 14px rgba(58,43,51,0.10));
    }
    .mini-heart svg{ width:100%; height:100%; display:block; }
    @keyframes miniRise{
      from{ transform: translate3d(0, 16px, 0); opacity: 0.0; }
      12%{ opacity: 0.9; }
      to{ transform: translate3d(0, -140px, 0); opacity: 0.0; }
    }
    @keyframes miniBlink{
      0%,100%{ filter: drop-shadow(0 10px 14px rgba(58,43,51,0.10)); }
      50%{ filter: drop-shadow(0 12px 16px rgba(58,43,51,0.14)); }
    }

    .overlay-actions{
      width:100%;
      display:flex;
      justify-content:center;
      margin-top: 12px;
    }
    .close{
      background: rgba(255,255,255,0.72);
      color: var(--ink);
      border: 1px solid rgba(255,255,255,0.85);
      min-width: 140px;
    }

    /* Motion rules */
    @media (prefers-reduced-motion: reduce){
      .sparkle, .mini-heart{ animation: none !important; opacity: 0.28; }
      button{ transition:none; }
    }

    /* Small phones */
    @media (max-width: 360px){
      .bear{ width: 210px; height: 236px; }
      button{ min-width: 108px; }
    }
  </style>
</head>
<body>
  <div class="sparkle-layer" id="sparkles" aria-hidden="true"></div>

  <main class="wrap">
    <section class="card" role="group" aria-label="Valentine card">
      <div class="card-inner">
        <div class="title" id="promptText">
          “Chrissy, on 2/2 of 2026, 22:22, will you be my Valentine?”
        </div>
        <div class="subtitle">A small question. A soft heart.</div>

        <div class="bear-stage" aria-hidden="true">
          <div class="bear">
            <div class="floor"></div>

            <div class="torso"></div>

            <div class="arm left"></div>
            <div class="arm right"></div>

            <div class="leg left"></div>
            <div class="leg right"></div>

            <div class="foot left"></div>
            <div class="foot right"></div>

            <div class="diaper">
              <div class="tape left"></div>
              <div class="tape right"></div>
            </div>

            <div class="ear left"></div>
            <div class="ear right"></div>

            <div class="head"></div>
            <div class="head-join"></div>

            <div class="face">
              <div class="eye left"></div>
              <div class="eye right"></div>
              <div class="blush left"></div>
              <div class="blush right"></div>
              <div class="nose"></div>
              <div class="mouth"></div>
            </div>
          </div>
        </div>

        <div class="buttons">
          <button class="yes" id="yesBtn" type="button">Yes</button>

          <div class="no-wrap" id="noWrap">
            <button class="no" id="noBtn" type="button">No</button>
          </div>
        </div>

        <div class="hint" id="hint">The “No” is shy. You can still catch it.</div>
      </div>
    </section>
  </main>

  <!-- Celebration overlay -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-label="Celebration">
    <div class="overlay-inner">
      <div class="hero" aria-hidden="true">
        <!-- Hearts + Arrow: single SVG, clear silhouettes, phone-readable -->
        <svg viewBox="0 0 520 520" width="100%" height="100%" role="img" aria-label="Two hearts with a cupid arrow">
          <defs>
            <!-- Soft heart shape path -->
            <path id="softHeart" d="M260 420
              C245 410, 165 360, 120 290
              C80 230, 92 165, 145 135
              C190 110, 235 130, 260 165
              C285 130, 330 110, 375 135
              C428 165, 440 230, 400 290
              C355 360, 275 410, 260 420Z" />

            <!-- Arrow silhouette (unified die-cut) -->
            <path id="arrowSil" d="
              M410 110
              L392 128
              L402 138
              L245 295
              L260 310
              L103 467
              L121 485
              L278 328
              L293 343
              L450 186
              L460 196
              L478 178
              L454 154
              L470 138
              L442 110
              Z
              " />

            <!-- Fletching (grouped fins) merged into the shaft area -->
            <path id="fletch" d="
              M408 112
              L378 142
              L362 126
              L382 106
              Z
              M424 128
              L394 158
              L378 142
              L408 112
              Z
              " />

            <!-- Arrowhead -->
            <path id="head" d="
              M100 468
              L68 500
              L118 508
              L135 491
              Z
              " />

            <!-- Clip to show only two small arrow segments on top (re-emerge effect) -->
            <clipPath id="arrowFrontClip">
              <!-- segment near top-right -->
              <rect x="340" y="80" width="170" height="140" rx="26" />
              <!-- segment near bottom-left -->
              <rect x="40" y="360" width="220" height="170" rx="26" />
            </clipPath>
          </defs>

          <!-- Back heart (slightly larger) -->
          <g transform="translate(10,0) scale(1.02)">
            <use href="#softHeart" fill="#ff5a98" opacity="0.90"></use>
          </g>

          <!-- Arrow behind hearts -->
          <g opacity="0.98" transform="translate(0,0)">
            <use href="#arrowSil" fill="#f0478f"></use>
            <use href="#fletch" fill="#f0478f"></use>
            <use href="#head" fill="#f0478f"></use>
          </g>

          <!-- Front heart (slightly smaller, on top) -->
          <g transform="translate(-12,10) scale(0.965)">
            <use href="#softHeart" fill="#ff7fb0" opacity="0.96"></use>
          </g>

          <!-- Arrow re-emerge segments on top (still a unified silhouette) -->
          <g clip-path="url(#arrowFrontClip)">
            <use href="#arrowSil" fill="#e93a82"></use>
            <use href="#fletch" fill="#e93a82"></use>
            <use href="#head" fill="#e93a82"></use>
          </g>

          <!-- Soft highlight on hearts for readability -->
          <g opacity="0.35">
            <path d="M175 185 C165 160, 190 140, 215 155 C235 168, 245 188, 248 206"
              fill="none" stroke="rgba(255,255,255,0.85)" stroke-width="10" stroke-linecap="round"/>
            <path d="M305 160 C328 142, 358 150, 365 176"
              fill="none" stroke="rgba(255,255,255,0.75)" stroke-width="9" stroke-linecap="round"/>
          </g>
        </svg>

        <div class="float-hearts" id="miniHearts" aria-hidden="true"></div>
      </div>

      <div class="overlay-actions">
        <button class="close" id="closeBtn" type="button">Close</button>
      </div>
    </div>
  </div>

  <script>
    (function(){
      const prefersReduced = window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches;

      // Sparkles (always visible, gentle)
      const sparkleLayer = document.getElementById("sparkles");
      const sparkleCount = 26;

      function rand(min, max){ return Math.random() * (max - min) + min; }

      for(let i=0;i<sparkleCount;i++){
        const s = document.createElement("div");
        s.className = "sparkle";
        const x = rand(0, 100);
        const y = rand(0, 100);
        const size = rand(5.5, 9.5);
        const dur = rand(6.2, 10.5);
        const delay = rand(0, 6.0);
        s.style.left = x + "vw";
        s.style.top = y + "vh";
        s.style.width = size + "px";
        s.style.height = size + "px";
        s.style.animationDuration = dur + "s, " + rand(2.1, 3.8) + "s";
        s.style.animationDelay = (-delay) + "s, " + (-rand(0, 2.2)) + "s";
        sparkleLayer.appendChild(s);
      }

      // "No" button playful dodge, but still clickable (not aggressive)
      const noWrap = document.getElementById("noWrap");
      const noBtn = document.getElementById("noBtn");
      const hint = document.getElementById("hint");

      let dodges = 0;
      const maxDodges = 6; // after this, it calms down so it never feels broken
      const pad = 4;

      function moveNoButton(soft){
        if (prefersReduced) return;
        const wrapRect = noWrap.getBoundingClientRect();
        const btnRect = noBtn.getBoundingClientRect();

        const maxX = Math.max(pad, wrapRect.width - btnRect.width - pad);
        const maxY = Math.max(pad, wrapRect.height - btnRect.height - pad);

        // Keep movement small and cute (never flinging away)
        const dx = soft ? rand(-10, 10) : rand(-22, 22);
        const dy = soft ? rand(-8, 8) : rand(-16, 16);

        // Current position (from transform)
        const m = new DOMMatrixReadOnly(getComputedStyle(noBtn).transform);
        let currentX = (m.isIdentity ? 0 : m.m41);
        let currentY = (m.isIdentity ? 0 : m.m42);

        let nextX = Math.min(maxX, Math.max(-maxX, currentX + dx));
        let nextY = Math.min(maxY, Math.max(-maxY, currentY + dy));

        noBtn.style.transition = "transform 170ms ease";
        noBtn.style.transform = `translate(${nextX}px, ${nextY}px)`;
      }

      function dodgeIfNeeded(){
        if (dodges >= maxDodges) return;
        dodges++;
        moveNoButton(false);
        if (dodges === 3){
          hint.textContent = "Okay okay... it’s still clickable.";
        }
        if (dodges === maxDodges){
          hint.textContent = "It’ll stay put now.";
        }
      }

      // Desktop hover
      noBtn.addEventListener("pointerenter", () => {
        if (dodges < maxDodges) dodgeIfNeeded();
      });

      // Mobile tap tease: move on early touch, but allow click
      noBtn.addEventListener("pointerdown", (e) => {
        // If user is actually clicking (pointerdown), do a gentle move first sometimes
        if (prefersReduced) return;
        if (dodges < maxDodges){
          dodgeIfNeeded();
          // Prevent accidental click on the same tap while it moves (feels intentional, not broken)
          e.preventDefault();
        }
      }, {passive:false});

      // After it calms down, clicking "No" just closes the tease
      noBtn.addEventListener("click", () => {
        hint.textContent = "Noted. Still here with you.";
        noBtn.style.filter = "brightness(0.98)";
        setTimeout(()=>{ noBtn.style.filter=""; }, 250);
      });

      // Celebration overlay + floating mini hearts
      const overlay = document.getElementById("overlay");
      const yesBtn = document.getElementById("yesBtn");
      const closeBtn = document.getElementById("closeBtn");
      const miniHearts = document.getElementById("miniHearts");

      function miniHeartSVG(){
        return `
          <svg viewBox="0 0 24 24" aria-hidden="true">
            <path d="M12 21.2c-0.2 0-0.4-0.1-0.6-0.2C7.2 18.4 3.8 15.7 2.6 12.9c-1.2-2.9 0-6 2.8-7.2c2-0.9 4.4-0.2 5.8 1.5c1.4-1.7 3.8-2.4 5.8-1.5c2.8 1.2 4 4.3 2.8 7.2c-1.2 2.8-4.6 5.5-8.8 8.1c-0.2 0.1-0.4 0.2-0.6 0.2z"
              fill="rgba(255,90,152,0.95)"/>
          </svg>
        `;
      }

      function clearMiniHearts(){
        while(miniHearts.firstChild) miniHearts.removeChild(miniHearts.firstChild);
      }

      function spawnMiniHearts(){
        clearMiniHearts();
        if (prefersReduced) return;

        // Place hearts mostly in middle + upper thirds, not bottom
        const count = 16;
        for(let i=0;i<count;i++){
          const h = document.createElement("div");
          h.className = "mini-heart";
          h.innerHTML = miniHeartSVG();

          const x = rand(12, 88);
          const y = rand(38, 78); // avoid clustering at bottom
          const size = rand(14, 22);
          const dur = rand(4.8, 6.6);
          const delay = rand(0, 3.2);

          h.style.left = x + "%";
          h.style.top = y + "%";
          h.style.width = size + "px";
          h.style.height = size + "px";
          h.style.animationDuration = dur + "s, " + rand(2.2, 3.6) + "s";
          h.style.animationDelay = (-delay) + "s, " + (-rand(0, 2.0)) + "s";

          miniHearts.appendChild(h);
        }
      }

      function openOverlay(){
        overlay.classList.add("show");
        spawnMiniHearts();
      }
      function closeOverlay(){
        overlay.classList.remove("show");
        clearMiniHearts();
      }

      yesBtn.addEventListener("click", openOverlay);
      closeBtn.addEventListener("click", closeOverlay);

      // Tap outside to close (gentle)
      overlay.addEventListener("click", (e) => {
        if (e.target === overlay) closeOverlay();
      });

      // Escape to close
      window.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && overlay.classList.contains("show")) closeOverlay();
      });
    })();
  </script>
</body>
</html>
