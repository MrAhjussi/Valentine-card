<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Valentine Card</title>
  <style>
    :root{
      --bg1:#ffe7f2;
      --bg2:#ffd3e7;
      --ink:#4d3440;
      --soft:#7b5a69;
      --card:#fff8fc;
      --card2:#ffeef7;
      --accent:#ff6fae;
      --accent2:#ff9bc8;
      --cream1:#fff1e6;
      --cream2:#efd8c4;
      --shadow: 0 18px 45px rgba(77,52,64,.18);
      --shadow2: 0 10px 22px rgba(77,52,64,.12);
      --radius: 28px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-rounded, system-ui, -apple-system, "SF Pro Rounded", "SF Pro Text", "Segoe UI", Arial, sans-serif;
      color:var(--ink);
      background:
        radial-gradient(900px 700px at 18% 12%, rgba(255,255,255,.55), transparent 58%),
        radial-gradient(800px 600px at 82% 18%, rgba(255,255,255,.45), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow:hidden;
    }

    /* soft sparkles */
    .sparkles{position:fixed; inset:0; pointer-events:none; overflow:hidden;}
    .sp{
      position:absolute;
      width:10px; height:10px;
      opacity:.55;
      animation: spFloat var(--dur) ease-in-out infinite;
      filter: drop-shadow(0 10px 18px rgba(255,111,174,.10));
    }
    .sp:before{
      content:"";
      position:absolute; inset:0;
      background: radial-gradient(circle at 40% 35%, rgba(255,255,255,.95), rgba(255,255,255,.35) 52%, rgba(255,255,255,0) 70%);
      border-radius:999px;
    }
    .sp:after{
      content:"";
      position:absolute; inset:-7px;
      background: radial-gradient(circle at 50% 50%, rgba(255, 190, 220, .55), rgba(255, 190, 220, 0) 60%);
      border-radius:999px;
      opacity:.55;
    }
    @keyframes spFloat{
      0%   { transform: translate3d(0, 30px, 0) scale(.92); opacity:.20; }
      35%  { opacity:.65; }
      100% { transform: translate3d(0, -140px, 0) scale(1.05); opacity:.10; }
    }

    .wrap{
      height:100%;
      display:flex;
      align-items:center;
      justify-content:center;
      padding: 22px 16px calc(22px + env(safe-area-inset-bottom));
    }

    .card{
      width:min(420px, 92vw);
      background: linear-gradient(180deg, var(--card), var(--card2));
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      border: 1px solid rgba(255,255,255,.8);
      padding: 18px 18px 16px;
      position:relative;
    }

    .badge{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.78);
      border: 1px solid rgba(255, 170, 210, .30);
      box-shadow: var(--shadow2);
      font-size: 12.5px;
      color: var(--soft);
      user-select:none;
    }
    .dot{
      width:9px;height:9px;border-radius:999px;
      background: radial-gradient(circle at 35% 30%, #fff, var(--accent));
      box-shadow: 0 10px 18px rgba(255,111,174,.20);
    }

    .stage{
      margin-top: 14px;
      border-radius: 22px;
      padding: 14px 10px;
      background: rgba(255,255,255,.70);
      border: 1px solid rgba(255, 170, 210, .24);
      box-shadow: 0 14px 30px rgba(77,52,64,.10);
      position:relative;
      overflow:hidden;
      display:flex;
      justify-content:center;
    }
    .stage:before{
      content:"";
      position:absolute; inset:-50px;
      background:
        radial-gradient(220px 160px at 32% 30%, rgba(255, 214, 232, .52), transparent 62%),
        radial-gradient(240px 180px at 74% 36%, rgba(255, 230, 241, .48), transparent 60%),
        radial-gradient(280px 200px at 50% 80%, rgba(255, 255, 255, .55), transparent 65%);
      opacity:.95;
    }

    .bear{
      width:min(320px, 82vw);
      aspect-ratio: 1 / 1;
      position:relative;
      z-index:1;
      animation: bob 3.4s ease-in-out infinite;
      transform-origin: 50% 72%;
    }
    @keyframes bob{
      0%{transform:translateY(0)}
      50%{transform:translateY(-6px)}
      100%{transform:translateY(0)}
    }

    .q{
      margin: 14px 6px 10px;
      text-align:center;
      font-size: 15.5px;
      line-height: 1.35;
      color: var(--ink);
    }
    .q strong{ color:#3f2a34; }

    .btnRow{
      margin-top: 10px;
      display:flex;
      justify-content:center;
      align-items:center;
      gap: 12px;
      position:relative;
      min-height: 62px;
      padding-bottom: 2px;
    }

    button{
      appearance:none;
      border:0;
      padding: 14px 18px;
      border-radius: 16px;
      font-weight: 650;
      letter-spacing: .2px;
      font-size: 15px;
      box-shadow: var(--shadow2);
      cursor:pointer;
      transition: transform .12s ease, filter .12s ease;
      user-select:none;
      touch-action: manipulation;
    }
    button:active{ transform: translateY(1px) scale(.99); filter: brightness(.98); }
    button:focus{ outline:none; }
    button:focus-visible{
      outline: 3px solid rgba(255,111,174,.35);
      outline-offset: 3px;
    }

    .yes{
      background: linear-gradient(180deg, rgba(255,255,255,.95), rgba(255, 230, 241, .92));
      border: 1px solid rgba(255,111,174,.34);
      color: #46303a;
      min-width: 128px;
    }

    /* No button container is absolute so it can dodge without shifting layout */
    .noSlot{
      width: 128px;
      height: 52px;
      position: relative;
    }
    .noWrap{
      position:absolute;
      left:0; top:0;
      width:128px;
      height:52px;
      display:flex;
      align-items:center;
      justify-content:center;
      transition: transform .12s ease;
    }
    .no{
      width:128px;
      background: linear-gradient(180deg, rgba(255,255,255,.92), rgba(255, 240, 248, .92));
      border: 1px solid rgba(255,155,200,.26);
      color: #7a5a68;
    }
    .hint{
      position:absolute;
      left:50%;
      transform: translateX(-50%);
      bottom: -24px;
      font-size: 12px;
      color: rgba(77,52,64,.60);
      opacity:0;
      transition: opacity .16s ease;
      white-space:nowrap;
      user-select:none;
      pointer-events:none;
    }
    .noWrap.show .hint{opacity:1}

    .tiny{
      margin-top: 10px;
      text-align:center;
      font-size: 12.5px;
      color: rgba(77,52,64,.60);
      user-select:none;
    }

    /* Overlay */
    .overlay{
      position:fixed; inset:0;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      background: rgba(255, 214, 232, .30);
      backdrop-filter: blur(4px);
      -webkit-backdrop-filter: blur(4px);
      z-index: 50;
      overflow:hidden;
    }
    .overlay.on{display:flex}

    .close{
      position:fixed;
      top: calc(14px + env(safe-area-inset-top));
      right: 14px;
      z-index: 60;
      background: rgba(255,255,255,.82);
      border: 1px solid rgba(255,111,174,.22);
      color: #4d3440;
      padding: 10px 12px;
      border-radius: 14px;
      font-size: 13px;
    }

    .pop{
      width:min(520px, 92vw);
      aspect-ratio: 1 / 1;
      position:relative;
      animation: popIn .20s ease-out both;
    }
    @keyframes popIn{
      from{transform:scale(.94); opacity:0}
      to{transform:scale(1); opacity:1}
    }

    .floatHearts{
      position:absolute; inset:0;
      pointer-events:none;
    }
    .mini{
      position:absolute;
      width: 16px; height: 16px;
      opacity:0;
      animation: rise var(--d) ease-in-out infinite;
      filter: drop-shadow(0 10px 18px rgba(255,111,174,.15));
    }
    @keyframes rise{
      0%   { transform: translate3d(0, 120%, 0) scale(.9); opacity:0; }
      18%  { opacity:.85; }
      55%  { opacity:.65; }
      70%  { opacity:.90; }
      100% { transform: translate3d(0, -8%, 0) scale(1.06); opacity:0; }
    }

    @media (prefers-reduced-motion: reduce){
      .bear,.sp,.mini,.pop{animation:none !important}
      button{transition:none !important}
    }
  </style>
</head>

<body>
  <div class="sparkles" id="sparkles" aria-hidden="true"></div>

  <main class="wrap">
    <section class="card" aria-label="Valentine card">
      <div class="badge" aria-hidden="true">
        <span class="dot"></span>
        <span>soft, cute, and brave</span>
      </div>

      <div class="stage">
        <!-- Plush bear (clean, cute proportions) -->
        <svg class="bear" viewBox="0 0 420 420" role="img" aria-label="A cute plush bear wearing a diaper">
          <defs>
            <linearGradient id="furA" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#fff1e6"/>
              <stop offset="1" stop-color="#efd8c4"/>
            </linearGradient>
            <linearGradient id="furB" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#fff7f0"/>
              <stop offset="1" stop-color="#ead0bc"/>
            </linearGradient>
            <linearGradient id="diA" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#ffffff"/>
              <stop offset="1" stop-color="#ffe5f2"/>
            </linearGradient>
            <radialGradient id="blush" cx="50%" cy="50%" r="50%">
              <stop offset="0" stop-color="#ff9bc8" stop-opacity=".85"/>
              <stop offset="1" stop-color="#ff9bc8" stop-opacity="0"/>
            </radialGradient>
            <filter id="sdrop" x="-30%" y="-30%" width="160%" height="160%">
              <feDropShadow dx="0" dy="16" stdDeviation="14" flood-color="rgba(77,52,64,.20)"/>
            </filter>
          </defs>

          <!-- ground shadow -->
          <ellipse cx="210" cy="350" rx="150" ry="24" fill="rgba(77,52,64,.10)"/>

          <g filter="url(#sdrop)">
            <!-- BODY (dominant, wider than head) -->
            <path d="M108 210
                     C92 246 98 308 132 340
                     C170 376 250 376 288 340
                     C322 308 328 246 312 210
                     C295 175 255 156 210 156
                     C165 156 125 175 108 210Z"
                  fill="url(#furA)" stroke="rgba(120,80,92,.10)" stroke-width="2"/>

            <!-- HEAD (slightly larger than body but narrower) -->
            <path d="M136 128
                     C132 78 170 50 210 50
                     C250 50 288 78 284 128
                     C280 176 248 202 210 202
                     C172 202 140 176 136 128Z"
                  fill="url(#furB)" stroke="rgba(120,80,92,.10)" stroke-width="2"/>

            <!-- EARS -->
            <g>
              <path d="M152 104
                       C132 78 150 52 178 64
                       C170 82 168 98 152 104Z"
                    fill="url(#furA)" stroke="rgba(120,80,92,.10)" stroke-width="2"/>
              <path d="M268 104
                       C288 78 270 52 242 64
                       C250 82 252 98 268 104Z"
                    fill="url(#furA)" stroke="rgba(120,80,92,.10)" stroke-width="2"/>
              <ellipse cx="168" cy="78" rx="18" ry="13" fill="rgba(255,155,200,.20)"/>
              <ellipse cx="252" cy="78" rx="18" ry="13" fill="rgba(255,155,200,.20)"/>
            </g>

            <!-- ARMS (quiet) -->
            <path d="M118 234
                     C92 256 96 286 120 296
                     C140 304 154 288 148 270
                     C142 252 134 238 118 234Z"
                  fill="url(#furA)" opacity=".96"/>
            <path d="M302 234
                     C328 256 324 286 300 296
                     C280 304 266 288 272 270
                     C278 252 286 238 302 234Z"
                  fill="url(#furA)" opacity=".96"/>

            <!-- LEGS -->
            <path d="M158 314
                     C136 322 126 346 140 362
                     C158 382 198 386 210 366
                     C220 348 200 320 158 314Z"
                  fill="url(#furA)"/>
            <path d="M262 314
                     C284 322 294 346 280 362
                     C262 382 222 386 210 366
                     C200 348 220 320 262 314Z"
                  fill="url(#furA)"/>

            <!-- FEET (wide + grounded) -->
            <ellipse cx="172" cy="374" rx="56" ry="20" fill="rgba(255,255,255,.35)"/>
            <ellipse cx="248" cy="374" rx="56" ry="20" fill="rgba(255,255,255,.35)"/>

            <!-- DIAPER (cute, readable) -->
            <path d="M142 268
                     C152 238 184 218 210 218
                     C236 218 268 238 278 268
                     C286 292 270 320 246 334
                     C228 344 192 344 174 334
                     C150 320 134 292 142 268Z"
                  fill="url(#diA)" stroke="rgba(255,111,174,.34)" stroke-width="2"/>
            <path d="M176 246 C192 258 228 258 244 246"
                  fill="none" stroke="rgba(255,111,174,.24)" stroke-width="5" stroke-linecap="round"/>
            <circle cx="160" cy="288" r="6" fill="rgba(255,111,174,.55)"/>
            <circle cx="260" cy="288" r="6" fill="rgba(255,111,174,.55)"/>

            <!-- FACE (even spacing, tiny smile, blush) -->
            <g>
              <circle cx="182" cy="132" r="10.5" fill="#2f2027"/>
              <circle cx="238" cy="132" r="10.5" fill="#2f2027"/>
              <circle cx="178" cy="128" r="3.4" fill="#ffffff" opacity=".9"/>
              <circle cx="234" cy="128" r="3.4" fill="#ffffff" opacity=".9"/>

              <path d="M210 144
                       C203 144 198 150 198 156
                       C198 164 205 168 210 168
                       C215 168 222 164 222 156
                       C222 150 217 144 210 144Z"
                    fill="rgba(77,52,64,.92)"/>
              <path d="M196 176 C205 184 215 184 224 176"
                    fill="none" stroke="rgba(77,52,64,.68)" stroke-width="5" stroke-linecap="round"/>

              <ellipse cx="156" cy="156" rx="24" ry="18" fill="url(#blush)" opacity=".95"/>
              <ellipse cx="264" cy="156" rx="24" ry="18" fill="url(#blush)" opacity=".95"/>
            </g>

            <!-- tiny stitch detail -->
            <path d="M210 202 C212 212 212 222 210 232"
                  stroke="rgba(120,80,92,.20)" stroke-width="3" stroke-linecap="round"/>
          </g>
        </svg>
      </div>

      <p class="q">
        <strong>Chrissy, on 2/2 of 2026, 22:22, will you be my Valentine?</strong>
      </p>

      <div class="btnRow" id="btnRow">
        <button class="yes" id="yesBtn" type="button">Yes</button>

        <div class="noSlot" aria-hidden="false">
          <div class="noWrap" id="noWrap">
            <button class="no" id="noBtn" type="button">No</button>
            <div class="hint" id="hint">teehee</div>
          </div>
        </div>
      </div>

      <div class="tiny" aria-hidden="true">made to feel like a tiny blind box surprise</div>
    </section>
  </main>

  <!-- Celebration overlay -->
  <div class="overlay" id="overlay" role="dialog" aria-modal="true" aria-label="Celebration">
    <button class="close" id="closeBtn" type="button">Close</button>

    <div class="pop" aria-hidden="true">
      <svg viewBox="0 0 520 520" width="100%" height="100%">
        <defs>
          <filter id="hShadow" x="-30%" y="-30%" width="160%" height="160%">
            <feDropShadow dx="0" dy="18" stdDeviation="16" flood-color="rgba(77,52,64,.22)"/>
          </filter>
          <linearGradient id="hb" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0" stop-color="#ff7fba"/>
            <stop offset="1" stop-color="#ff4f9a"/>
          </linearGradient>
          <linearGradient id="hf" x1="0" y1="0" x2="0" y2="1">
            <stop offset="0" stop-color="#ffd6ea"/>
            <stop offset="1" stop-color="#ff9bc8"/>
          </linearGradient>

          <!-- Heart path -->
          <path id="heart" d="
            M260 430
            C210 395 135 334 135 248
            C135 192 176 154 228 154
            C247 154 259 162 260 164
            C261 162 273 154 292 154
            C344 154 385 192 385 248
            C385 334 310 395 260 430Z
          "/>

          <!-- Arrow: one unified die-cut silhouette (filled shapes only) -->
          <path id="arrow" d="
            M476 120
            L452 96
            L414 134
            L428 148
            L238 338
            L252 352
            L442 162
            L456 176
            L494 138
            Z

            M210 366
            L172 404
            L156 388
            L110 434
            L86 410
            L132 364
            L116 348
            L154 310
            Z
          "/>

          <!-- Mask for hearts area (used to hide the "front" arrow inside hearts so it looks behind) -->
          <mask id="heartMask">
            <rect width="520" height="520" fill="white"/>
            <!-- black = hidden (inside hearts) -->
            <use href="#heart" fill="black" transform="translate(-18,-10) scale(1.05)"/>
            <use href="#heart" fill="black" transform="translate(10,12) scale(.98)"/>
          </mask>
        </defs>

        <!-- Arrow behind hearts (so it disappears under them) -->
        <g filter="url(#hShadow)" opacity=".92">
          <use href="#arrow" fill="#ff4f9a"/>
        </g>

        <!-- Back heart -->
        <g filter="url(#hShadow)" opacity=".95">
          <use href="#heart" fill="url(#hb)" transform="translate(-18,-10) scale(1.05)"/>
        </g>

        <!-- Front heart -->
        <g filter="url(#hShadow)">
          <use href="#heart" fill="url(#hf)" transform="translate(10,12) scale(.98)"/>
        </g>

        <!-- Arrow re-emerge (only outside hearts) -->
        <g mask="url(#heartMask)" opacity=".96">
          <use href="#arrow" fill="#ff4f9a"/>
        </g>
      </svg>

      <div class="floatHearts" id="floatHearts" aria-hidden="true"></div>
    </div>
  </div>

  <script>
    (function(){
      const sparkles = document.getElementById("sparkles");
      const yesBtn = document.getElementById("yesBtn");
      const overlay = document.getElementById("overlay");
      const closeBtn = document.getElementById("closeBtn");

      const noWrap = document.getElementById("noWrap");
      const noBtn = document.getElementById("noBtn");
      const hint = document.getElementById("hint");
      const btnRow = document.getElementById("btnRow");

      const floatHearts = document.getElementById("floatHearts");

      // sparkles
      const n = 18;
      for(let i=0;i<n;i++){
        const s = document.createElement("div");
        s.className = "sp";
        const size = 7 + Math.random()*10;
        const dur  = 3.5 + Math.random()*4.5;
        s.style.width = size+"px";
        s.style.height = size+"px";
        s.style.left = (Math.random()*100)+"vw";
        s.style.top  = (Math.random()*100)+"vh";
        s.style.setProperty("--dur", dur+"s");
        s.style.animationDelay = (-Math.random()*dur)+"s";
        sparkles.appendChild(s);
      }

      // No button dodge (cute, not aggressive; becomes clickable)
      let dodges = 0;
      let allowClick = false;

      function showHint(text){
        hint.textContent = text;
        noWrap.classList.add("show");
        setTimeout(()=>noWrap.classList.remove("show"), 700);
      }

      function dodge(){
        if(allowClick) return;
        dodges++;

        if(dodges >= 7){
          allowClick = true;
          showHint("ok ok, you can click now");
          return;
        } else {
          showHint("teehee");
        }

        // noWrap lives inside a 128x52 slot; move within it
        const maxX = 18;  // small playful dodge
        const maxY = 10;

        const x = (Math.random()*2-1)*maxX;
        const y = (Math.random()*2-1)*maxY;

        noWrap.style.transform = `translate(${x}px, ${y}px)`;
      }

      noBtn.addEventListener("pointerenter", (e)=>{
        if(e.pointerType === "mouse") dodge();
      });

      noBtn.addEventListener("pointerdown", (e)=>{
        if(e.pointerType !== "mouse" && !allowClick){
          e.preventDefault();
          dodge();
        }
      }, {passive:false});

      noBtn.addEventListener("click", ()=>{
        if(!allowClick){
          dodge();
          return;
        }
        showHint("still cute though.");
      });

      // celebration hearts
      function makeMiniHeart(){
        const el = document.createElement("div");
        el.className = "mini";

        // put them into middle + upper portions
        const x = 8 + Math.random()*84;           // %
        const size = 12 + Math.random()*16;
        const dur = 2.6 + Math.random()*2.8;
        const delay = Math.random()*1.2;

        el.style.left = x + "%";
        el.style.bottom = "-10%";
        el.style.width = size + "px";
        el.style.height = size + "px";
        el.style.setProperty("--d", dur+"s");
        el.style.animationDelay = delay+"s";

        const fill = (Math.random()<0.5) ? "#ff6fae" : "#ffd6ea";
        const svg = encodeURIComponent(
          `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path fill="${fill}" d="M12 21s-6.7-4.4-9.3-8C.7 9.7 2.4 6.6 5.6 6.1c1.7-.3 3.2.4 4.1 1.5.9-1.1 2.4-1.8 4.1-1.5 3.2.5 4.9 3.6 2.9 6.9-2.6 3.6-9.3 8-9.3 8z"/>
          </svg>`
        );
        el.style.backgroundImage = `url("data:image/svg+xml,${svg}")`;
        el.style.backgroundRepeat = "no-repeat";
        el.style.backgroundSize = "contain";
        return el;
      }

      function startHearts(){
        floatHearts.innerHTML = "";
        for(let i=0;i<14;i++) floatHearts.appendChild(makeMiniHeart());
      }

      function openOverlay(){
        overlay.classList.add("on");
        startHearts();
        closeBtn.focus({preventScroll:true});
      }

      function closeOverlay(){
        overlay.classList.remove("on");
        floatHearts.innerHTML = "";
        yesBtn.focus({preventScroll:true});
      }

      yesBtn.addEventListener("click", openOverlay);
      closeBtn.addEventListener("click", closeOverlay);

      overlay.addEventListener("click", (e)=>{
        const pop = overlay.querySelector(".pop");
        if(!pop.contains(e.target) && e.target !== closeBtn) closeOverlay();
      });

      window.addEventListener("keydown", (e)=>{
        if(e.key === "Escape" && overlay.classList.contains("on")) closeOverlay();
      });
    })();
  </script>
</body>
</html>
